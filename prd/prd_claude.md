# 제품 요구사항 분석서 (PRD Analysis)

## 1. 프로젝트 개요
- **플랫폼**: Spring Boot 기반 웹 서버
- **언어**: Java
- **목적**: 회원관리 시스템 구현

## 2. 전제 조건 (Prerequisites)

### 2.1 기술 환경
- Spring Boot Framework 사용
- Java 언어 사용
- 데이터베이스 자유 선택 (MySQL, PostgreSQL, Redis 등)
- GitHub public 저장소 필수

### 2.2 배포 및 실행 환경
- 로컬 환경에서 실행 가능해야 함
- README.md에 실행 가이드 필수 작성
- 외부 저장소 사용 시 로컬 실행 방법 명시

### 2.3 개발 과정
- AI 어시스턴트 적극 활용
- PROMPT.md 파일에 모든 프롬프트 기록

## 3. 기능 요구사항 (Functional Requirements)

### 3.1 1단계: 회원가입 API
#### 사용자 API
- **엔드포인트**: 회원가입 API
- **입력 데이터**:
  - 계정 (account)
  - 암호 (password)
  - 성명 (name)
  - 주민등록번호 (11자리)
  - 핸드폰번호 (11자리)
  - 주소 (address)
- **유효성 검증**:
  - 계정값 유일성 보장
  - 주민등록번호 유일성 보장
- **특이사항**: 본인인증 불필요, 서버는 요청을 신뢰

### 3.2 2단계: 시스템 관리자 API
#### 관리자 API (Basic Auth 인증)
- **인증 정보**:
  - 사용자명: admin
  - 암호: 1212
- **기능**:
  - **회원 조회**: Pagination 기반
  - **회원 수정**: 암호, 주소만 수정 가능 (개별 또는 동시 수정)
  - **회원 삭제**

### 3.3 3단계: 사용자 로그인 및 정보 조회
#### 사용자 API (JWT 인증)
- **로그인 API**: 계정/암호 기반 인증, JWT 토큰 발급
- **본인 정보 조회 API**:
  - JWT 토큰 기반 인증
  - 로그인한 사용자만 접근 가능
  - 주소는 최상위 행정구역만 제공 (예: "서울특별시", "경기도")

### 3.4 4단계: 대용량 메시징 시스템
#### 관리자 API - 연령대별 메시지 발송
- **대상**: 전체 회원 (3천만 사용자)
- **메시지 형식**: "{회원 성명}님, 안녕하세요. 현대 오토에버입니다."
- **발송 순서**: 카카오톡 → SMS (실패 시)

#### 외부 API 연동
**카카오톡 메시지 API**
- **URL**: POST http://localhost:8081/kakaotalk-messages
- **인증**: Basic Auth (autoever/1234)
- **제한**: 1분당 100회
- **요청**: `{"phone": "xxx-xxxx-xxxx", "message": "blabla"}`
- **응답**: HTTP 200/400/401/500

**SMS 메시지 API**
- **URL**: POST http://localhost:8082/sms?phone={phone}
- **인증**: Basic Auth (autoever/5678)
- **제한**: 1분당 500회
- **요청**: `{"message": "blabla"}` (form-urlencoded)
- **응답**: `{"result": "OK"}`

## 4. 기술적 제약사항 (Technical Constraints)

### 4.1 성능 요구사항
- 3천만 사용자 지원
- 카카오톡 API: 1분당 100회 제한
- SMS API: 1분당 500회 제한

### 4.2 데이터 제약사항
- 계정 중복 불가
- 주민등록번호 중복 불가
- 주소 정보의 부분 노출 (최상위 행정구역만)

### 4.3 인증 및 보안
- 관리자 API: Basic Auth (admin/1212)
- 사용자 API: JWT 토큰 기반 인증
- 외부 API: Basic Auth

## 5. 개발 우선순위

1. **1단계**: 회원가입 API 구현
2. **2단계**: 관리자 API (조회/수정/삭제) 구현
3. **3단계**: 사용자 로그인 및 정보 조회 API 구현 (JWT)
4. **4단계**: 대용량 메시징 시스템 구현

## 6. 비기능적 요구사항 (Non-Functional Requirements)

### 6.1 확장성
- 대용량 사용자 지원 (3천만)
- 메시지 발송 속도 제한 고려

### 6.2 가용성
- 로컬 환경에서 실행 가능
- 외부 의존성 최소화

### 6.3 문서화
- README.md 실행 가이드
- PROMPT.md AI 프롬프트 기록

## 7. 구현 시 고려사항

### 7.1 아키텍처
- Spring Boot 기반 REST API
- 적절한 레이어 분리 (Controller, Service, Repository)
- JWT 토큰 처리를 위한 필터/인터셉터 구현
- 외부 API 호출을 위한 클라이언트 구현

### 7.2 데이터베이스 설계
- 사용자 테이블 설계
- 인덱싱 전략 (계정, 주민등록번호)
- 페이징 처리를 위한 최적화

### 7.3 성능 최적화
- 메시지 발송 큐 시스템
- 병렬 처리를 통한 속도 제한 관리
- 재시도 로직 구현

### 7.4 JWT 구현 사항
- JWT 토큰 생성 및 검증 로직
- 토큰 만료 시간 설정
- 리프레시 토큰 고려 (선택사항)